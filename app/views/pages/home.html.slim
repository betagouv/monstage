.bg-cover-image-homepage
  .container
    .row.py-3.py-sm-5

    .row.no-gutters.py-5
      .col-12
        h1.text-white.text-center.mb-3
          | monstagedetroisieme.fr,
          br
          | ce sont
          - offer_count = Finders::InternshipOfferConsumer.new(params: current_user_or_visitor.default_search_options, user: current_user_or_visitor).all.total_count
          - presenter = Presenters::InternshipOffer.new
          span.home-blue-shadow = " #{presenter.large_number(offer_count)} "
          | offres de stages
          br
          | qui n'attendent que vous

        .col-12= render partial: "internship_offers/search/form", locals: { render_as_partial: true, url: internship_offers_path, default_values: user_presenter.default_search_options, form_id: :home_search_form }
        .actions.d-flex.d-stick.d-md-none.p-2
          = link_to search_internship_offers_path(current_user_or_visitor.default_search_options), class: 'btn btn-danger rounded-sm', data: { :"test-id" => 'mobile-search-button' }
            = "Rechercher un stage"


    .row.py-3.py-sm-5
= cache PrismicFinder do

  .bg-transparent
    .container
      .row
        .col-12
          h2.py-5.text-center
            = PrismicFinder.homepage()['homepage.slider_title'].as_text
      .row.pb-5.mb-3.flex-md-reverse-column
        .col-12.col-md-6.align-self-center
          .nav.flex-md-column.column.nav-pills.nav-pills-home.py-md-5.align-middle role="tablist"


            - PrismicFinder.homepage()['homepage.news'].each_with_index do |news, index|
              = link_to "#news#{index}",
                        class: "p-3 nav-link my-2 #{'active' if index == 0}",
                        data: {toggle: "pill"}, role: 'tab',
                        aria: {controls:"news#{index}", selected: index == 0  }  do
                i.fas.fa-fw class="fa-#{news.get('news_icone').as_text}"
                | &nbsp;
                h6.h6.d-none.d-md-inline= news.get('news_title').as_text

        .col-12.col-md-6
          .tab-content.partners-height

            - PrismicFinder.homepage()['homepage.news'].each_with_index do |news, index|
              .tab-pane role="tabpanel" id="news#{index}" class="#{'active' if index == 0}"
                .card
                  = image_tag news.get('news_image').url, class: "card-img-top", alt: news.get('news_image').alt.blank? ? 'image' : news.get('news_image').alt
                  .card-body
                    = news.get('news_description').as_html(nil).html_safe
                    p.mb-0= link_to news.get('news_link').url, class: 'text-danger font-weight-bold', target: '_blank', rel: "external noopener noreferrer" do
                      = news.get('news_link_text').as_text



  .bg-light-blue
    .container
      .row
        .col-12
          h3.h2.py-3.py-sm-5.mb-0.text-center À propos de monstagedetroisieme.fr

      .row.pb-5
        .col-sm-12.col-md-5
          p.text-left.class_selector
            span.d-md-inline= image_tag asset_pack_path('media/images/logo-mon-stage-3e.svg'),
                                        alt: "Logo mon stage de troisieme",
                                        height: 100,
                                        class: ''
          h3.h3 Le monde professionnel s’ouvre à l’école
          p Cette plateforme, par la diversité de ses offres, va vous permettre de réaliser une expérience enrichissante en lien avec votre orientation et votre projet personnel.

          p Vous allez pouvoir observer des milieux professionnels peut-être encore inconnus ou découvrir de nouveaux secteurs ou activités.

        .col-sm-12.col-md-5.offset-md-2
          div
            h4.h4.mb-3.align-bottom.d-inline-flex
              = image_tag asset_pack_path('media/images/homepage/benefices/icon-offrir-un-stage.png'),
                          alt: "Illustration offrir un stage",
                          height: 28,
                          class: 'mr-3 d-none d-md-inline'
              | Offrir un stage
            p Déposez vos offres de stages à l'aide de votre compte personnalisé. Il vous permettra à tout moment de modifier vos offres et de suivre leur avancement.

          div.mt-3.mt-md-5
            h4.h4.mb-3.align-bottom.d-flex
              = image_tag asset_pack_path('media/images/homepage/benefices/icon-trouver-un-stage.png'),
                          alt: "Illustration trouver un stage",
                          height: 28,
                          class: 'mr-3 d-none d-md-inline'
              | Trouver un stage
            p À l’invitation  de votre professeur principal, accédez à de nombreuses offres de stages et postulez à vos offres préférées.

          div.mt-3.mt-md-5
            h4.h4.mb-3.align-bottom.d-flex
              = image_tag asset_pack_path('media/images/homepage/benefices/icon-accompagner-les-eleves.png'),
                          alt: "Illustration accompagner les élèves",
                          height: 28,
                          class: 'mr-3 d-none d-md-inline'

              | Accompagner les élèves
            p.mb-0 Cet outil vous permettra d'accéder à un tableau de suivi de vos élèves tout au long de la recherche de leur stage.



  .bg-white
    .container
      .row
        .col-12
          h4.h2.py-3.py-sm-5.mb-0.text-center Documents utiles

      .row.align-items-center.pb-5
        .d-none.d-sm-flex.col-6
          = image_tag asset_pack_path('media/images/homepage/illustration-documents-utiles.svg'),
                      class: 'img-fluid',
                      alt: 'Illustration documents utiles'
        .col-12.col-sm-6.align-middle-items
          p Les stages de troisième sont l’occasion de découvrir le monde du travail et de s’interroger sur son projet d’orientation. Les élèves et les professeurs trouveront ici des documents leur permettant de favoriser la mobilité des élèves et de préparer le stage dans les meilleures conditions.
          p= link_to "Documents utiles",
                    documents_utiles_path,
                    class: "btn btn-outline-danger",
                    title: 'Consulter les documents utiles'

  .bg-white.d-none.d-md-block
    .container
      .row.pb-5
        .col-6
          h3.h3.py-5.text-center Un projet porté par
          .row
            .col-12
              p= image_tag asset_pack_path("media/images/homepage/sponsors/Logo-anct.jpg"),
                          alt: "Logo anct",
                          class: 'img-fluid'
          .row
            .col-12
              p= image_tag asset_pack_path("media/images/homepage/sponsors/Logo-ministere-de-la-cohesion-des-territoire-et-ministere-education-nationale.jpg"),
                          alt: "Logo ministere de la cohesion des territoire et ministere de l'education nationale",
                          class: 'img-fluid'

        .col-6
          h3.h3.py-5.text-center Nos partenaires

          .col-12.text-center.pt-4
            - partners_map_of_logo_url.each do |partner|
              = render partial: "partner_link",
                      locals: { partner_url: partner[:url], partner_logo: partner[:logo], partner_height: partner[:height] }

